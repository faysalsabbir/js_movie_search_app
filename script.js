class SetMovie{constructor(){this.relatedMovie=document.querySelector(".related__movie"),this.movieSearchInput=document.querySelector(".search__movie--title"),this.movieEl={movieName:document.querySelector(".movie__name"),movieTagline:document.querySelector(".movie__tagline"),movieStory:document.querySelector(".movie__story"),movieGenre:document.querySelector(".movie__genre"),movieProduction:document.querySelector(".movie__production--list"),movieReleaseDate:document.querySelector(".original__release--date"),movieIncome:document.querySelector(".box__office--income"),voteAverage:document.querySelector(".vote__average--rating"),runningTime:document.querySelector(".running__time--minute"),moviePoster:document.querySelector("#moviePoster"),body:document.querySelector("body")}}movieDataStructuring(e,t){let i=[];return e.forEach(e=>{i.push(" "+e[t])}),i}displaySingleMovie(e){this.movieEl.movieName.innerHTML=e.original_title,this.movieEl.movieTagline.innerHTML=e.tagline,this.movieEl.movieStory.innerHTML=e.overview,this.movieEl.movieGenre.innerHTML=this.movieDataStructuring(e.genres,"name"),this.movieEl.movieProduction.innerHTML=this.movieDataStructuring(e.production_companies,"name"),this.movieEl.movieReleaseDate.innerHTML=e.release_date,this.movieEl.movieIncome.innerHTML="$"+e.revenue,this.movieEl.voteAverage.innerHTML=e.vote_average+" / 10",this.movieEl.runningTime.innerHTML=e.runtime+" mins",this.movieEl.moviePoster.src="https://image.tmdb.org/t/p/original"+e.poster_path,this.movieEl.body.style.backgroundImage=`url(https://image.tmdb.org/t/p/original${e.backdrop_path})`}isValueEmpty(e){return!!e}displayRelatedMovie(e){this.createRelatedMovie(e)}createRelatedMovie(e){this.relatedMovie.innerHTML="";let t="<ul>";e&&e.forEach(e=>{t+=`<li id="${e.id}"><a href="#" id="${e.id}">${e.original_title}</a></li>`}),t+="</ul>",this.relatedMovie.insertAdjacentHTML("afterbegin",t)}temporaryMovie(e){this.displaySingleMovie(e)}toggleRelatedMovie(e){this.isValueEmpty(e)?this.relatedMovie.style.cssText="top: 3.6rem;\n        visibility: visible;\n        z-index: 1; ":this.relatedMovie.style.cssText=""}}let setMovie=new SetMovie;class GetMovieAPI extends SetMovie{constructor(){super(),this.API_KEY="b0f0c76ab0b1753866233d98981040bd"}DemoMovie(){let e=`https://api.themoviedb.org/3/movie/475557?api_key=${this.API_KEY}&language=en-US`;fetch(e).then(e=>e.json()).then(e=>{this.temporaryMovie(e)})}searchMovie(e){let t=`https://api.themoviedb.org/3/search/movie?api_key=${this.API_KEY}&language=en-US&query=${e}&page=1&include_adult=false`;fetch(t).then(e=>e.json()).then(e=>{let t="";if(e)try{t=e.results.filter((e,t)=>t<5)}catch(e){}this.getRelatedMovie(t),this.searchMovieById(e.results[0].id)})}searchMovieById(e){this.movieById(e=>{this.getMovie(e)},e)}movieById(e,t){let i=`https://api.themoviedb.org/3/movie/${t}?api_key=${this.API_KEY}&language=en-US`;fetch(i).then(e=>e.json()).then(t=>{e(t)})}getMovie(e){try{this.getSingleMovie(e)}catch(e){}}getRelatedMovie(e){this.displayRelatedMovie(e)}selectMovie(e){this.movieById(e=>{this.selectedMovie(e)},e)}selectedMovie(e){this.displaySingleMovie(e)}}let movieAPI=new GetMovieAPI;movieAPI.DemoMovie(),movieAPI.movieSearchInput.addEventListener("keyup",e=>{try{movieAPI.toggleRelatedMovie(setMovie.movieSearchInput.value),movieAPI.searchMovie(e.target.value),movieAPI.displayRelatedMovie()}catch(e){}}),document.addEventListener("click",e=>{try{"#38700"!=e.target.id&&movieAPI.toggleRelatedMovie("")}catch(e){}});let relatedMovie=document.querySelector(".related__movie");relatedMovie.addEventListener("click",(function(e){try{relatedMovie.contains(e.target)&&movieAPI.selectMovie(e.target.id)}catch(e){}}));